#!/bin/bash

# Zenclora Gaming Utilities Installer Script
# Interactive menu for gaming performance and compatibility tools.

set -e

GREEN='\033[0;32m'
CYAN='\033[0;36m'
NC='\033[0m'

# Function to ensure i386 architecture
ensure_i386() {
    if ! dpkg --print-foreign-architectures | grep -q "i386"; then
        echo "Adding i386 architecture..."
        sudo dpkg --add-architecture i386
        sudo apt update
    fi
}

clear
echo -e "${CYAN}==========================================${NC}"
echo -e "${CYAN}    Zenclora Gaming Utilities             ${NC}"
echo -e "${CYAN}==========================================${NC}"
echo "Which gaming utility would you like to install?"
echo ""

options=(
    "GameMode (Performance Optimizer)" 
    "MangoHud (Vulkan/OpenGL Overlay)" 
    "Wine & Winetricks (Compatibility)" 
    "System Optimizers (irqbalance, thermald)"
    "CPU Power GUI (CPU Management)"
    "Xbox Controller Support (xboxdrv)"
    "Install All" 
    "Exit"
)

PS3="Please enter your choice (1-8): "

select opt in "${options[@]}"
do
    case $opt in
        "GameMode (Performance Optimizer)")
            echo "Installing GameMode..."
            sudo apt update && sudo apt install -y gamemode
            echo -e "${GREEN}GameMode successfully installed!${NC}"
            break
            ;;
        "MangoHud (Vulkan/OpenGL Overlay)")
            echo "Installing MangoHud..."
            sudo apt update && sudo apt install -y mangohud
            echo -e "${GREEN}MangoHud successfully installed!${NC}"
            break
            ;;
        "Wine & Winetricks (Compatibility)")
            echo "Installing Wine and Winetricks..."
            ensure_i386
            sudo apt update && sudo apt install -y wine winetricks wine64 wine32
            echo -e "${GREEN}Wine and Winetricks successfully installed!${NC}"
            break
            ;;
        "System Optimizers (irqbalance, thermald)")
            echo "Installing System Optimizers..."
            sudo apt update && sudo apt install -y irqbalance thermald
            echo -e "${GREEN}System Optimizers successfully installed!${NC}"
            break
            ;;
        "CPU Power GUI (CPU Management)")
            echo "Installing CPU Power GUI..."
            sudo apt update && sudo apt install -y cpupower-gui
            echo -e "${GREEN}CPU Power GUI successfully installed!${NC}"
            break
            ;;
        "Xbox Controller Support (xboxdrv)")
            echo "Installing Xbox Controller Support..."
            sudo apt update && sudo apt install -y xboxdrv
            echo -e "${GREEN}Xbox Controller Support successfully installed!${NC}"
            break
            ;;
        "Install All")
            echo "Installing all gaming utilities..."
            ensure_i386
            sudo apt update && sudo apt install -y gamemode mangohud wine winetricks wine64 wine32 irqbalance thermald cpupower-gui xboxdrv
            echo -e "${GREEN}All gaming utilities successfully installed!${NC}"
            break
            ;;
        "Exit")
            echo "Exiting..."
            exit 0
            ;;
        *) echo "Invalid option $REPLY. Please choose 1-8.";;
    esac
done


